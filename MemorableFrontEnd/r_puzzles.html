<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="apple-mobile-web-app-capable" content="yes" /> 
    <meta name="apple-touch-fullscreen" content="yes" />

    <link rel="shortcut icon" href="img/icon.jpg">
    <title>Memorable</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/3-col-portfolio.css" rel="stylesheet">

    <!-- Memorable CSS -->
    <link href="css/memorable.css" rel="stylesheet">

    <!-- Slick Slider JS -->
    <link rel="stylesheet" type="text/css" href="js/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="js/slick/slick-theme.css"/>   

</head>

<body>

    <!-- Header -->
    <div class="memorable-header">
        <img src="img/logo.png" class="header-logo">
    </div>

    <!-- Page Content -->
    <div class="container restrict-screensize">


        <!-- Go Back -->
        <img src="img/backButton.png" class="back-button" onclick="backButton()">

        <!-- User -->
        <input type="image" id="profileImg" class="btTxt submit user-icon" value=" " id="saveForm" 
					data-toggle="modal" data-target="#myModal2" />

        <div class="user-name" id="displayName"></div>

		<input type="submit" value="Settings" class="btTxt submit user-edit text-center" id="saveForm" 
				style="padding: 0; border: none; background: white;"
					data-toggle="modal" data-target="#myModal2"/>
		
		<!--
        <a href="f_profile.html">
            <div class="user-edit text-center">Edit Profile</div>
        </a>
		-->
			
		<div class="modal fade" id="myModal2" tabindex="-1" style="top:20%" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
			<div class="modal-dialog" style="width: 300px"> <div class="modal-content"> 
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="myModalLabel">Please enter PIN</h4>
				</div>
				<form name="pass2" id="pass2" class="form-inline" role="form" 
					action=" javascript: 
						location.href = 'f_profile.html';					
					">
					<div class="modal-body">
						<div class="form-group">
							<label for="pwd">PIN:</label>
							<input type="text" class="form-control" id="pwd" name="page" placeholder="####">
						</div>
					</div>
					<div class="modal-footer" style="text-align:center;">
						<input type="submit" value="Enter" class="btn btn-default"></input>						
					</div>
				</form>
			</div> </div>
		</div>


        <!-- Page Header -->
        <div class="row">
            <div class="col-sm-3">
            </div>
            <div class="col-sm-6">
                <h1 class="page-title text-center">Play a Puzzle 
                </h1>
            </div>
            <div class="col-sm-3">
            </div>
        </div>
        <!-- /.row -->


        <!-- Puzzles Row -->
        <div class="puzzles-table puzzles-row row">
        </div>
        <!-- /.row -->


        <!-- Fake Back & Next Buttons -->
        <img src="img/interests_back.png" class="fake-back-button-puzz" onclick="slideBack()">
        <img src="img/interests_next.png" class="fake-next-button-puzz" onclick="slideNext()">

       
        <!-- View Slideshow -->
        <div class="slideshow-button-row">
            <div class="slideshow-button text-center" onclick=gotoSlideshow()>View Slideshow
            </div>
        </div>
        <!-- /.row -->
        
        

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="js/slick/slick.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
			/*
          $('.puzzles-table').slick({
            infinite: true,
            rows: 2,
            slidesToShow: 4,
            slidesToScroll: 4,
            speed:1000,
            arrows:false
          });
			*/
          // Set upper profile info for user 
          var user_id = getCookie("username");
          var fname = getCookie("fname");
          var lname = getCookie("lname");
          var imgPath = "img/fakeUsers/" + user_id + ".jpg";
          $("#displayName").html(fname);
          $("#profileImg").attr("src", imgPath);

        });
    </script>
    <script>
        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for(var i=0; i<ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1);
                if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
            }
            return "";
        }

        function gotoSlideshow() {
            window.location = "r_slideshow.html"; 
        }

        function backButton() {
            window.location = "home.html"; 
        }

        function playPuzzle(fileName) {
            window.location = "/play/" + fileName; 
        }

        function slideNext() {
            $('.puzzles-table').slick('slickNext');
        }
        function slideBack() {
            $('.puzzles-table').slick('slickPrev');
        }
    </script>

	<!-- get the images and display them -->
	<script>
		//do a single picture first
		//var userID = ...  finish this when we impliment multi user
/*
            <div class="col-sm-3">
                <img class="puzzle-image img-responsive" src="img/fakeInterests/golf2.jpg" onclick="playPuzzle()">
*/
		$.get('/pictures', function(data) {
			for (var i = 0; i < data.length; i++) {
				var fileName = data[i].file_name
				var img = $('<img>')
				img.attr('class', 'puzzle-image img-responsive')
				img.attr('src', '/uploads/' + fileName) 
				img.attr('id', fileName)
				img.attr('onclick', 'playPuzzle("' + fileName + '")')

				var div = $('<div></div>')
				div.attr('class', 'col-sm-3')
				div.append(img)
				$('.puzzles-row:last').append(div)	
			}

          $('.puzzles-table').slick({
            infinite: true,
            rows: 2,
            slidesToShow: 4,
            slidesToScroll: 4,
            speed:1000,
            arrows:false
          });
		})
	</script>
</body>

</html>
